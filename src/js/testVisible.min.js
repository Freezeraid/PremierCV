(function(t){var e=t(window);t.fn.visible=function(o,i,f,n){if(!(this.length<1)){f=f||"both";var r=this.length>1?this.eq(0):this,l="undefined"!=typeof n&&null!==n,h=l?t(n):e,u=l?h.position():0,g=r.get(0),p=h.outerWidth(),s=h.outerHeight(),b=i!==!0||g.offsetWidth*g.offsetHeight;if("function"==typeof g.getBoundingClientRect){var a=g.getBoundingClientRect(),c=l?a.top-u.top>=.6&&a.top<s+u.top:a.top>=.6&&a.top<s,d=l?a.bottom-u.top>.6&&a.bottom<=s+u.top:a.bottom>.6&&a.bottom<=s,v=l?a.left-u.left>=.6&&a.left<p+u.left:a.left>=.6&&a.left<p,m=l?a.right-u.left>.6&&a.right<p+u.left:a.right>.6&&a.right<=p,w=o?c||d:c&&d,y=o?v||m:v&&m,w=a.top<.6&&a.bottom>s||w,y=a.left<.6&&a.right>p||y;if("both"===f)return b&&w&&y;if("vertical"===f)return b&&w;if("horizontal"===f)return b&&y}else{var z=l?0:u,B=z+s,C=h.scrollLeft(),H=C+p,R=r.position(),W=R.top,j=W+r.height(),q=R.left,L=q+r.width(),Q=o===!0?j:W,k=o===!0?W:j,x=o===!0?L:q,A=o===!0?q:L;if("both"===f)return!!b&&k<=B&&Q>=z&&A<=H&&x>=C;if("vertical"===f)return!!b&&k<=B&&Q>=z;if("horizontal"===f)return!!b&&A<=H&&x>=C}}}})(jQuery);